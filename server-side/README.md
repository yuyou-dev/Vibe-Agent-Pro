# Gemini API HTTPS Proxy (Tencent Cloud Lighthouse Edition)

ä¸“ä¸º **è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ (Node.js é•œåƒ)** æ‰“é€ çš„ Google Gemini API è½¬å‘æœåŠ¡ã€‚
æ— éœ€é…ç½® Nginxï¼Œæ— éœ€å¤æ‚çš„ Linux çŸ¥è¯†ï¼Œ**ç›´æŽ¥è¦†ç›–æ–‡ä»¶å³å¯ä½¿ç”¨**ã€‚

## âœ¨ ç‰¹æ€§
- ðŸŽ¯ **å¼€ç®±å³ç”¨**ï¼šé€‚é…è…¾è®¯äº‘é»˜è®¤è·¯å¾„ï¼Œè¦†ç›–å³è·‘ã€‚
- ðŸ”’ **åŽŸç”Ÿ HTTPS**ï¼šNode.js ç›´æŽ¥æŒ‚è½½è¯ä¹¦ï¼Œå®‰å…¨åŠ å¯†ã€‚
- ðŸ”„ **æ™ºèƒ½è·³è½¬**ï¼šHTTP (80) è‡ªåŠ¨è·³è½¬ HTTPS (443)ã€‚
- ðŸš€ **è¿›ç¨‹å®ˆæŠ¤**ï¼šé›†æˆ PM2 ç®¡ç†ï¼ŒæœåŠ¡æŒ‚æŽ‰è‡ªåŠ¨é‡å¯ã€‚

---

## ðŸ“¦ éƒ¨ç½²æŒ‡å— (3æ­¥æžå®š)

### ç¬¬ä¸€æ­¥ï¼šæ‰¾åˆ°ä½ çš„æœåŠ¡å™¨è·¯å¾„
1. ç™»å½• [è…¾è®¯äº‘æŽ§åˆ¶å°](https://console.cloud.tencent.com/lighthouse)ã€‚
2. è¿›å…¥ä½ çš„è½»é‡åº”ç”¨æœåŠ¡å™¨è¯¦æƒ…é¡µã€‚
3. ç‚¹å‡»é¡¶éƒ¨çš„ **â€œåº”ç”¨ç®¡ç†â€** æ ‡ç­¾ã€‚
4. åœ¨ **â€œåº”ç”¨å†…è½¯ä»¶ä¿¡æ¯â€** åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ° `Node.js` çš„å®‰è£…è·¯å¾„ã€‚
   > é»˜è®¤é€šå¸¸æ˜¯ï¼š`/usr/local/lighthouse/softwares/nodejs/app`

### ç¬¬äºŒæ­¥ï¼šä¸Šä¼ å¹¶è¦†ç›–æ–‡ä»¶
å°†æœ¬ä»“åº“ä¸­çš„ä»¥ä¸‹æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œä¸Šä¼ å¹¶**è¦†ç›–**åˆ°ä½ åˆšæ‰æ‰¾åˆ°çš„æœåŠ¡å™¨ç›®å½•ä¸­ï¼š

1. **`app.js`** (æ ¸å¿ƒä»£ç ï¼Œç›´æŽ¥è¦†ç›–åŽŸæ–‡ä»¶)
2. **`package.json`** (é…ç½®æ–‡ä»¶ï¼Œç›´æŽ¥è¦†ç›–åŽŸæ–‡ä»¶)
3. **`certs/` æ–‡ä»¶å¤¹** (ä½ éœ€è¦æ–°å»ºè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶æ”¾å…¥ä½ çš„è¯ä¹¦)
   - è¯·å°†ä½ çš„ SSL è¯ä¹¦é‡å‘½åä¸º `server.crt`
   - è¯·å°†ä½ çš„ SSL ç§é’¥é‡å‘½åä¸º `server.key`
   - *æ³¨æ„ï¼šè¯ä¹¦è¯·é€‰æ‹© Nginx æ ¼å¼ä¸‹è½½*

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ä¾èµ–å¹¶é‡å¯
ç™»å½•æœåŠ¡å™¨ç»ˆç«¯ï¼ˆSSHï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®Œæˆæœ€åŽé…ç½®ï¼š

```bash
# 1. è¿›å…¥ç¨‹åºç›®å½• (æ ¹æ®ç¬¬ä¸€æ­¥æ‰¾åˆ°çš„è·¯å¾„ï¼Œå¦‚æžœæ˜¯é»˜è®¤è·¯å¾„å¦‚ä¸‹)
cd /usr/local/lighthouse/softwares/nodejs/app/

# 2. å®‰è£…å¿…è¦çš„ä¾èµ–åº“ (Express, Proxyç­‰)
npm install

# 3. å¯åŠ¨/é‡å¯æœåŠ¡
# å¦‚æžœä¹‹å‰æœ‰æ—§è¿›ç¨‹ï¼Œå…ˆæ¸…ç†
npm run kill 
npm run prestart
# å¯åŠ¨æ–°æœåŠ¡
npm start

```

**ðŸŽ‰ æ­å–œï¼éƒ¨ç½²å®Œæˆã€‚**

---

## ðŸ›  å¸¸ç”¨ç®¡ç†å‘½ä»¤

ç”±äºŽæˆ‘ä»¬åœ¨ `package.json` ä¸­é›†æˆäº† PM2ï¼Œä½ å¯ä»¥ç›´æŽ¥åœ¨ç›®å½•ä¸‹ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

| åŠŸèƒ½ | å‘½ä»¤ | è¯´æ˜Ž |
| --- | --- | --- |
| **å¯åŠ¨æœåŠ¡** | `npm start` | å¯åŠ¨å¹¶åŽå°è¿è¡Œ (è‡ªåŠ¨å¼€æœºè‡ªå¯) |
| **é‡å¯æœåŠ¡** | `npm run restart` | ä¿®æ”¹ä»£ç æˆ–è¯ä¹¦åŽæ‰§è¡Œ |
| **åœæ­¢æœåŠ¡** | `npm run stop` | æš‚åœè½¬å‘ |
| **æŸ¥çœ‹æ—¥å¿—** | `npm run logs` | æŸ¥çœ‹å®žæ—¶è®¿é—®æ—¥å¿— |
| **æŸ¥çœ‹çŠ¶æ€** | `npm run list` | æŸ¥çœ‹è¿è¡ŒçŠ¶æ€å’Œå†…å­˜å ç”¨ |

---

## ðŸ”— å¦‚ä½•ä½¿ç”¨

çŽ°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ çš„åŸŸåç›´æŽ¥è°ƒç”¨ Gemini API äº†ã€‚

**æŽ¥å£åœ°å€ç¤ºä¾‹ï¼š**
`https://ä½ çš„åŸŸå.com/v1beta/models/gemini-pro:generateContent`

**ä»£ç è°ƒç”¨ç¤ºä¾‹ (JavaScript):**

```javascript
const URL = "[https://ä½ çš„åŸŸå.com/v1beta/models/gemini-pro:generateContent](https://ä½ çš„åŸŸå.com/v1beta/models/gemini-pro:generateContent)";

fetch(URL, {
    method: "POST",
    headers: {
        "Content-Type": "application/json",
        "x-goog-api-key": "ä½ çš„_GOOGLE_API_KEY" // ä¾ç„¶ä½¿ç”¨å®˜æ–¹ Key
    },
    body: JSON.stringify({ 
        contents: [{ parts: [{ text: "Hello World" }] }] 
    })
})
.then(res => res.json())
.then(console.log);

```



